{% extends '::layout.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    {{ form_stylesheet(form) }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ form_javascript(form) }}
{% endblock %}

{% block content %}
<div class="col-sm-8">
    <div class="jumbotron">
        <div class="row">
            <div class="col-md-12">

                {% if newsubscriber %}
                <h1>{{'New subscription'|trans }}</h1>
                {% else %}
                <h1>{{'Please check your subscription details'|trans }}</h1>
                {% endif %}

                {{ form_start(form) }}

                {% for child in form.children %}
                    {% if child.vars.errors is defined and child.vars.errors|length%}
                    <div class="alert alert-block alert-danger">
                        <a class="close" data-dismiss="alert">Ã—</a>
                        {{ form_errors(child) }}
                    </div>
                    {% endif %}
                {% endfor %}

                <div class="form-group">
                    <div class="col-md-12">
                        <div class="col-md-6" id="generalInformation">
                            <fieldset>
                                <legend>{{ 'General information'|trans }}</legend>

                                {{ form_label(form.school) }}
                                {{ form_widget(form.school, { 'attr' : { 'class': 'form-control' } }) }}

                                {{ form_label(form.graduation) }}
                                {{ form_widget(form.graduation, { 'attr' : { 'class': 'form-control' } }) }}

                                {{ form_label(form.pricingtype) }}
                                {{ form_widget(form.pricingtype, { 'attr' : { 'class': 'form-control' } }) }}

                                {{ form_label(form.wantsBill) }}
                                {{ form_widget(form.wantsBill) }}
                            </fieldset>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="col-md-6" id="deliveryAddress">
                            <fieldset>
                                <legend>{{ 'Delivery address'|trans }}</legend>
                                <div id="deliveryAddressStreet">
                                    {{ form_label(form.deliveryaddress.street) }}
                                    {{ form_widget(form.deliveryaddress.street, { 'attr' : { 'class': 'form-control' } }) }}
                                </div>

                                <div id="deliveryAddressPostalCode">
                                    {{ form_label(form.deliveryaddress.postalCode) }}
                                    {{ form_widget(form.deliveryaddress.postalCode, { 'attr' : { 'class': 'form-control' } }) }}
                                </div>

                                <div id="deliveryAddressMunicipality">
                                    {{ form_label(form.deliveryaddress.municipality) }}
                                    {{ form_widget(form.deliveryaddress.municipality, { 'attr' : { 'class': 'form-control' } }) }}
                                </div>

                                <div id="deliveryAddressCountry">
                                    {{ form_label(form.deliveryaddress.country) }}
                                    {{ form_widget(form.deliveryaddress.country, { 'attr' : { 'class': 'form-control' } }) }}
                                </div>
                            </fieldset>
                        </div>

                        <div class="col-md-6" id="facturationAddress">
                            <fieldset>
                                <legend>{{ 'Facturation address'|trans }}</legend>
                                <div id="facturationAddressStreet">
                                    {{ form_label(form.facturationaddress.street) }}
                                    {{ form_widget(form.facturationaddress.street, { 'attr' : { 'class': 'form-control' } }) }}
                                </div>

                                <div id="facturationAddressPostalCode">
                                    {{ form_label(form.facturationaddress.postalCode) }}
                                    {{ form_widget(form.facturationaddress.postalCode, { 'attr' : { 'class': 'form-control' } }) }}
                                </div>

                                <div id="deliveryAddressMunicipality">
                                    {{ form_label(form.facturationaddress.municipality) }}
                                    {{ form_widget(form.facturationaddress.municipality, { 'attr' : { 'class': 'form-control' } }) }}
                                </div>

                                <div id="facturationAddressCountry">
                                    {{ form_label(form.facturationaddress.country) }}
                                    {{ form_widget(form.facturationaddress.country, { 'attr' : { 'class': 'form-control' } }) }}
                                </div>
                            </fieldset>
                        </div>

                        <div class="col-md-12" id="sameAddress">
                            {{ form_label(form.sameaddress) }}
                            {{ form_widget(form.sameaddress) }}
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="col-md-4" id="vatNumber">
                            {{ form_label(form.vatNumber) }}
                            {{ form_widget(form.vatNumber, { 'attr' : { 'class': 'form-control' } }) }}
                        </div>
                    </div>
                    <div class="col-md-12">

                        <div class="col-md-4" id="promoCode">
                            {{ form_label(form.promoCode) }} 
                            {{ form_widget(form.promoCode, { 'attr': { 'class': 'form-control', 'placeholder': 'optional'}}) }}
                        </div>
                    </div>
                    <div class="col-md-12">
                        {{form_widget(form.save, { 'attr': {'class': 'btn btn-primary form-control'}})}}
                        {% if userid == app.user.id %}
                        <a href="{{path('fos_user_profile_show')}}" class="btn btn-danger form-control">{{ 'Cancel'|trans }}</a>
                        {% else %}
                        <a href="{{path('viewSpecificUser', {userid: userid})}}" class="btn btn-danger form-control">{{ 'Cancel'|trans }}</a>
                        {% endif %}
                    </div>
                </div>

                {{ form_rest(form) }}
                {{ form_end(form) }}
            </div>
        </div>

    </div>
</div>
{% endblock %}
